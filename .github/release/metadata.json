{
  "version": "0.5.7a4",
  "tag": "v0.5.7a4",
  "release_name": "Inquira v0.5.7a4",
  "release_body": "## Release Highlights\n\n- Stabilized the v1 workspace-first architecture: workspace is now required for chat persistence and runtime context, while dataset selection remains optional.\n- Hardened local runtime/data boundaries to avoid legacy path leakage and reduce startup side effects from deprecated code paths.\n- Added configurable LLM token controls and model catalog controls via `inquira.toml`, with backend/frontend wiring and validation.\n- Reduced noisy startup UX issues in desktop by fixing local snapshot persistence compatibility and suppressing expected auth probe noise when backend/session is not yet ready.\n\n## Workspace, Storage, and Cleanup\n\n- Added per-workspace `workspace.json` manifest creation/update to make workspace metadata explicit and auditable.\n- Removed legacy `DatabaseManager` startup coupling in v1 runtime paths to prevent unintended `app.db` creation side effects.\n- Changed code executor fallback working directory from legacy `~/.inquira/workspaces` to `~/.inquira/runtime/exec_tmp`.\n- Added a safe legacy cleanup utility with dry-run/apply behavior:\n  - Detects orphan `user_*` folders using DB-backed checks.\n  - Removes empty top-level legacy `workspaces` directory when safe.\n  - Removes legacy `app.db` only when safety checks pass.\n\n## Auth and Session Architecture\n\n- Introduced repository interface boundary for auth/session to enable provider swap without service rewrite:\n  - `create_user`, `get_user_by_username`, `get_user_by_id`\n  - `create_session`, `get_session`, `delete_session`\n- Added repository factory/provider selection via config (`INQUIRA_AUTH_PROVIDER=sqlite|supabase`).\n- Implemented SQLite provider and scaffolded Supabase provider contract implementation path.\n- Updated compatibility handling so preference/plan fields remain robust across enum/string representations.\n\n## LLM Runtime and Token Controls\n\n- Added TOML-driven global and per-task token limits under `[llm.limits]`:\n  - `default`\n  - `schema`\n  - `code_generation`\n- Wired limits into runtime call paths:\n  - Default ask/chat client token cap.\n  - Schema generation/regeneration token cap.\n  - Agent code generation model token cap.\n- Added validation for invalid/non-positive limits and environment override support:\n  - `INQUIRA_LLM_DEFAULT_MAX_TOKENS`\n  - `INQUIRA_LLM_SCHEMA_MAX_TOKENS`\n  - `INQUIRA_LLM_CODE_MAX_TOKENS`\n\n## TOML-Driven Model Catalog (P1 Fix)\n\n- Added `[llm].models` support in runtime config (with full-model-ID validation).\n- Exposed `available_models` from backend preferences API and loaded it in frontend app store.\n- Updated frontend model selector to consume backend-provided model options instead of a hardcoded dropdown list.\n- Added optional env override for model catalog (`INQUIRA_LLM_MODELS`) and ensured selected default/lite models are always represented.\n\n## Desktop UX and Reliability\n\n- Fixed Tauri local snapshot save/load warnings by guarding `file.sync()` usage for plugin compatibility where sync is unavailable.\n- Added required fs capability coverage checks for app-data snapshot read/write behavior.\n- Suppressed expected startup auth probe network noise (`/api/v1/auth/me`) to reduce false-positive red console errors before backend/session readiness.\n\n## Frontend v1 Flow Alignment\n\n- Enforced workspace-required + API-key-required analysis gating in chat path.\n- Kept dataset optional for chat; dataset sync only runs when dataset is explicitly selected.\n- Preserved v1 flow behavior without auto-creating a workspace during submit.\n\n## Test Coverage and Regression Safety\n\n- Added/updated backend tests for:\n  - Workspace manifest lifecycle.\n  - Startup hygiene and legacy decoupling.\n  - Auth repository factory and contract boundaries.\n  - Token limit parsing/validation and propagation.\n  - API contract exposure for `available_models`.\n- Added/updated frontend tests for:\n  - Local state snapshot persistence and capability expectations.\n  - Auth probe startup noise suppression.\n  - Workspace/dataset chat gating behavior.\n  - Model selector behavior based on backend-provided model catalog."
}
